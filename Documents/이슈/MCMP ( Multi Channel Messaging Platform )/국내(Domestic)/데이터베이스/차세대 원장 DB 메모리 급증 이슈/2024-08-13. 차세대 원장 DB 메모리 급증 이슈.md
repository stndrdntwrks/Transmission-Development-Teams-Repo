#MCMP #이슈 #메모리_폭증 #2024/08/13 #미해결 


## 배경

> 2024-08-13 14:19분 차세대 원장 DB 서버의 메모리 사용량이 약 **97 퍼센트** 로 급증. 해당 문제를 운영팀에서 Zabbix 알림을 통해 확인하여 해당 내용 전달받음

- 차세대 원장 DB 메모리 사용량 추이
	![[차세대 원장 DB 메모리 추이.png]]

	위의 메모리 사용량 추이 그래프를 보면 알 수 있듯 약 14시 19분부터 메모리 사용량이 100 퍼센트 근접할 정도로 폭증.


## 문제 파악

차세대 원장 DB 의 메모리 사용량이 급증하는 원인을 우선 메세지 인입량 증가로 인한 단기적 메모리 사용량 증가로 예상하고 이를 확인하기 위해 **RabbitMQ 관리자 페이지** 에서 주요 사용 큐의 메세지 증가율을 확인.

- **RabbitMQ / Overview Message Rates**
![[차세대 원장 DB 메모리 급증 시점 RabbitMQ.png]]

위의 그래프를 보면 알 수 있듯 해당 시간대에서 특이사항은 확인할 수 없었으며 **주요 메세지 인입 큐(SMS / MMS 큐)** 를 확인했으나 마찬가지로 해당 시간대에 특이사항은 없었음.

- **RabbitMQ / SMS Queue Message Rate**
	![[차세대 SMS 큐 메세지 인입량 추이.png]]

- **RabbitMQ / SMS Queue Message Rate**
	![[차세대 MMS 큐 메세지 인입량 추이.png]]


메모리 폭증 시점 이후 약 20분 가량 시간이 지나자 차세대 원장 DB 의 메모리 사용량이 정상화되었음. 하지만 어떤 이유로 인하여 해당 시간대에 메모리 사용량 폭증이 있었는지는 아직 확인이 되지 않았음.
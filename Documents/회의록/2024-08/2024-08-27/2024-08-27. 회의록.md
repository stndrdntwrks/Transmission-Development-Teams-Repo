#전송개발팀 #회의록 #2024/08/27


| 날짜         | 작성자 | 참여자                   |
| ---------- | --- | --------------------- |
| 2024-08-27 | 심정훈 | 장정호 팀장, 김한휘, 심정훈, 윤경엽 |

---

# 목차

1. [[#2024-08-28 세미나 발표]]
2. [[#SMS 장애 전파 및 예외 처리]]
3. [[#센더 매니저 기능 추가]]
4. [[#MCMP 플랫폼 신규 211 대역 이전 작업]]
	1. [[#211 대역 이전 테스트 목적 CID 선별 및 운영 팀 교육]]
	2. [[#Redis Migration 계획]]
		1. [[#기존 규격 유지]]
		2. [[#규격 변경]]
		3. [[#데이터 삭제 여부 검토]]
	3. [[#KisaExchange 수정]]
	4. [[#DataManager 수정]]
	5. [[#PTP 수정]]
	6. [[#INFODB(218.233.240.43) 차세대 XDB 이전 작업 필요 여부 검토]]

---

# 2024-08-28 세미나 발표

> 세미나(2024-08-28) 발표자 : 지민

---

# SMS 장애 전파 및 예외 처리

> **[[2024-08-26. 서초 SK 센더 OOM 발생 이슈]] 관련** OOM 및 **관리 포인트 밖 예외 발생 시 장애 전파 개선 추후 방안 논의** 필요

--- 
# 센더 매니저 기능 추가

> **[[2024-08-26. 서초 SK 센더 OOM 발생 이슈]] 관련**하여 프로세스 장애 발생 시 담당자에게 메세지를 통한 장애 발생 이슈 공유 기능 추가 논의 #추가_개발_이슈

---

# MCMP 플랫폼 신규 211 대역 이전 작업

> 1. **MCMP 플랫폼 신규 211 대역 이전 작업**이 **2024년 9월 5일 진행**하는 것으로 **결정**
> 2. 해당 이전 작업 관련하여 작업 계획서 작성 중


### 211 대역 이전 테스트 목적 CID 선별 및 운영 팀 교육

> 아래의 순서대로 운영팀 1명 선별하여 교육 예정

- 교육 내용
	1. 211 대역 테스트 목적으로 기존 운영기 센더의 CID 선정
	2. 레디스(**222.233.53.37:7000**) 에서 *\[과정 1\] 에서 선정한 센더* 의 `ability` 를 `false` 로 수정
	   1. 원격 PC 에 접속하여 **Another Redis Desktop Manager** 실행
	   2. SenderInfo 의 센더 그룹을 선택 후 해당 그룹에 센더를 선택
	   3. 데이터 수정
			```json
			{
				"senderName": "G_S_SK06",
				"senderQueueName": "mt.sender.G_S_SK06",
				"exchange": "xsend.sms",
				"senderGroup": "Direct",
				"natCode": "82",
				"provideList": [
					"SKT"
				],
				"messageChannel": "SMS",
				"ability": true // 수정할 ability 속성
			}
			```
	3. 센더 프로세스를 종료하지 않고 `ability` 만 `false` 로 유지할 수 있도록 센더 매니저 프로세스 종료


## Redis Migration 계획

> 1. **기존** 사용하는 **Redis 의 데이터**를 **신규 규격으로 Migration 작업** 진행
> 2. **기존 Redis** 에서 **Mirgation 이후 사용하지 않는 데이터 파악**하여 **삭제** 처리

### 기존 규격 유지

1. **Spam:keyword** 
   해당 데이터에 등록된 키워드가 포함된 메시지의 경우 차단.
   
2. **수신자 신고 리스트(RP)**
   광고 그룹의 경우 수신자 신고 리스트에 존재하는 수신번호 차단 조치.

### 규격 변경

1. **KISA** 
	기존 `KISA-{Callback}` 형식의 데이터를 차단 결과값 구분 가능하도록 해시 데이터에 키를 추가 
	 
	1. orgName : "SPAMCHEKCER" -> "blockDivision" : "0" - 스팸체커/업데이터로 인하여 등록된 데이터
	2. orgName : "BLACKLIST" -> "blockDivision" : "1" - KISA에서 새로 내려주는 BlackList 발신번호 리스트 데이터
	3. orgName : "SPAMCHECKER" -> "blockDivision" : "2" -  KISA 스팸 모니터링 사이트에서 스팸 중복건이 많은 발신번호(직접 등록)
	4. division : "1" 인 경우 "blockDivision" 데이터 필요없음. - KISA에서 기존에 내려주는 블랙리스트 발신번호 리스트 데이터


1. **기업 보호 번호(PP)**
	AS-IS(`PP.{GroupCode}.{Callback}`) 에서 TO-BE(`Permit:{GroupCode}`) 형식으로 변경하여 데이터 형식 통일
	
	- Permit:A000007 "01012345678"
	  ```json
		{
			"groupCode":"A000007",
			 "callback":"01012345678",
			 "rmk":"..",
			 "creator":"ME",
			 "createTime":"20240730182326"
		 }
		```
	


### 데이터 삭제 여부 검토

- **광고 그룹(AC)**
  차세대 `MessageDelivery` 내부 필드에 **정산 코드 별 ADFlag 존재**
  
- **예외 사업자(PE)**
  예외 사업자 데이터는 Redis 와 DB(MariaDB)에 적재하였으나 DB에만 적재되도록 변경되었음.
  
- **스팸번호(SP)** 
  `PTP-Updater` 이 조회하던 테이블에 데이터가 존재하지 않음.

- **화이트 리스트(PW)**
  화이트리스트의 경우 예외사업자와 동일하게 발신번호 등록 하지 않아도되나 발신번호에 대한 Validation 수행. > *1. 지역 번호 체크*, *2. 포멧 체크*


## KisaExchange 수정

> 1. [[#규격 변경]] 에서 `KISA-{Callback}` 형식으로 데이터 규격 변경
> 2. 레디스 접속 정보, AS-IS(210대역)에서 TO-BE(211대역)으로 변경


## DataManager 수정

> 1. 수신자 신고 리스트(RP)
>     등록/조회/수정/삭제 기능 및 INFODB 테이블, Redis 테이블 규격 지정 및 변경 필요.
> 2. 화이트 리스트(PW)
>     등록/조회/수정/삭제 기능 및 INFODB 테이블, Redis 테이블 규격 지정 및 변경 필요. 


## PTP 수정

> 변경되는 레디스 데이터 규격에 맞춰 검칙 로직 수정


## INFODB(218.233.240.43) 차세대 XDB 이전 작업 필요 여부 검토

> 1. 기존 INFODB 의 데이터가 필요한 경우, 이전 필요 데이터 정리
> 2. 기존 INFODB 의 데이터가 필요하지 않은 경우, 차세대 XDB에 테이블 생성 후 새롭게 데이터 적재
---



